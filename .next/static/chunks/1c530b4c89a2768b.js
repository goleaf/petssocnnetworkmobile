(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(96243),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>d,"CardFooter",()=>l,"CardHeader",()=>r,"CardTitle",()=>i])},11741,e=>{"use strict";let t=(0,e.i(10965).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],11741)},11797,e=>{"use strict";var t=e.i(96243),a=e.i(93221),s=e.i(26587);e.i(59258);var r=e.i(38036),i=e.i(70065),d=e.i(67881),n=e.i(9572),l=e.i(79064),c=e.i(11741),o=e.i(16212),o=o,u=e.i(81435);function x(){let{user:e}=(0,r.useAuth)(),x=(0,s.useRouter)(),[m,h]=(0,a.useState)([]),[f,p]=(0,a.useState)("all");(0,a.useEffect)(()=>{e?j():x.push("/")},[e,x]);let j=()=>{e&&h((0,n.getNotificationsByUserId)(e.id))},g="unread"===f?m.filter(e=>!e.read):m;return e?(0,t.jsxs)("div",{className:"container max-w-4xl py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Notifications"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Stay updated with your activity"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.Button,{variant:"all"===f?"default":"outline",size:"sm",onClick:()=>p("all"),children:"All"}),(0,t.jsxs)(d.Button,{variant:"unread"===f?"default":"outline",size:"sm",onClick:()=>p("unread"),children:["Unread (",m.filter(e=>!e.read).length,")"]})]}),m.some(e=>!e.read)&&(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{e&&((0,n.markAllAsRead)(e.id),j())},children:[(0,t.jsx)(o.default,{className:"h-4 w-4 mr-2"}),"Mark all as read"]})]}),0===g.length?(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(l.Bell,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"unread"===f?"No unread notifications":"No notifications yet"})]})}):(0,t.jsx)("div",{className:"space-y-2",children:g.map(e=>(0,t.jsx)(i.Card,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${!e.read?"border-primary/50 bg-muted/30":""}`,children:(0,t.jsx)(i.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",onClick:()=>{e.read||(0,n.markAsRead)(e.id),"post"===e.targetType?x.push(`/blog/${e.targetId}`):"user"===e.targetType?x.push(`/user/${e.actorId}`):"wiki"===e.targetType&&x.push(`/wiki/${e.targetId}`)},children:[(0,t.jsx)("p",{className:"text-sm mb-1",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,u.formatDistanceToNow)(new Date(e.createdAt),{addSuffix:!0})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[!e.read&&(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void((0,n.markAsRead)(t),j())},title:"Mark as read",children:(0,t.jsx)(o.default,{className:"h-4 w-4"})}),(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void((0,n.deleteNotification)(t),j())},title:"Delete",children:(0,t.jsx)(c.Trash2,{className:"h-4 w-4"})})]})]})})},e.id))})]}):null}e.s(["default",()=>x],11797)}]);